%!TEX root = main.tex

\marcelo{Ahora solo consideramos la idea de capturar sobre estructuras ordenadas}

Assume that $\alpha$ is a sentence in $\qso$. Then slightly abusing notation, we also use $\alpha$ to denote a function defined over $\R$ such that for every $\A \in \ostr[\R] $:
\begin{eqnarray*}
	\alpha(\enc(\A)) & = & \sem{\alpha}(\A).
\end{eqnarray*}
\begin{definition} \label{cap-def}
	Let $\FF$ a fragment of $\qso$ and $\CC$ a function complexity class. Then $\FF$ {\em captures $\CC$ over ordered structures} if 
	
	\begin{itemize}
	\item[(1)] for every $\alpha$ in $\FF$ over a signature $\R$. There exists $f \in \CC$ such that for every $\A \in \ostr[\R]$:  $\alpha(\enc(\A)) = f(\enc(\A))$; and 
		
	\item[(2)] for every $f \in \CC$, let $f$ be defined over $\R$. There exists $\alpha$ in $\FF$ such that for every $\A \in \ostr[\R]$:  $f(\enc(\A)) = \alpha(\enc(\A))$.
	\end{itemize} 
\end{definition}
%In the previous definition, if $\KK$ is the class of all finite structures, then we say that $\FF$ captures $\CC$ over the class of all structures, and if $\KK$is the class of all ordered finite structures, then we say that $\FF$ captures $\CC$ over the class of ordered structures.

\marcelo{Hacer una pasada a la demostracion del siguiente teorema considerando que solo usamos estructuras ordenadas, y teniendo en cuenta que las funciones estan definidas sobre relational signatures.}
\martin{done}
\begin{theorem} \label{captfp}
	$\qfo(\lfp)$ captures $\fp$ over ordered structures.
\end{theorem}

\begin{theorem} \label{qfo-pfp-cap}
	$\qfo(\pfp)$ captures $\nfpspace$ over ordered structures.
\end{theorem}

Saluja et. al \cite{SalujaST95} define a family of counting classes $\#\LL$ for each fragment $\LL$ of $\so$. For a formula $\varphi(x,X)$ over $\R$, the function $f_{\varphi(x,X)}$ is defined as
\[
f_{\varphi(x,X)}(\A) = \vert \{\langle e,P\rangle\mid \A\models\varphi(e,P)\}\vert.
\]
for each $\A\in\ostr[\R]$. A function $f:\Sigma^*\to\nat$ is in $\#\LL$ if there exists an $\LL$ formula $\varphi(x,X)$ such that $f = f_{\varphi(x,X)}$. Let $\sqso(\LL)$ be a fragment of $\qso$ defined by the following grammar:
\[
\alpha := \sa{x}\varphi \ \mid \ \sa{X} \varphi \ \mid \ \sa{x}\alpha \ \mid \ \sa{X}\alpha,
\]
where $\varphi$ is an $\LL$-formula. It can be seen that $\sqso(\LL)$ captures $\#\LL$ over ordered structures and that $\sqso(\LL) \subseteq \eqso(\LL)$. 

\begin{theorem} \label{eqso-fo-cap}
	$\eqso(\fo)$ captures $\shp$ over ordered structures.
\end{theorem}

\begin{corollary} \label{eqso-lfp-cap}
	$\eqso(\lfp)$ captures $\shp$ over ordered structures.
\end{corollary}

\begin{theorem} \label{eqso-eso-cap}
	$\eqso(\eso)$ captures $\spp$ over ordered structures.
\end{theorem}

\begin{theorem} \label{qso-pfp-cap}
	$\qso(\pfp)$ captures $\fpspace$ over ordered structures.
\end{theorem}
