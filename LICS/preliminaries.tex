%!TEX root = main.tex

A relational signature $\R$ (or just signature) is a finite set $\{R_1, \ldots, R_k\}$, where each $R_i$ ($1 \leq i \leq k$) is a relation name with an associated arity greater than 0, which is denoted by $\arity(R_i)$. A finite structure over $\R$ (or just finite $\R$-structure) is a tuple $\A = \langle A, R_1^\A, \ldots, R_k^\A \rangle$ such that $A$ is a finite set and $R_i^\A \subseteq A^{\arity(R_i)}$ for every $i \in \{1, \ldots, k\}$. A finite $\R$-structure $\A$ is said to be ordered if $<$ is a binary predicate name in $\R$ and $<^\A$ is a linear order on $A$. Let $\str[\R]$ be the class of all finite $\R$-structures and $\ostr[\R]$ be the class of all ordered finite $\R$-structures. 

From now on, assume given disjoint infinite sets $\fv$ and $\sv$ of first-order variables and second-order variables, respectively. Notice that every variable in $\sv$ has an associated arity, which is denoted by $\arity(X)$. Then given a relational signature $\R$, the set of second-order logic formulas ($\so$-formulas) over $\R$ is given by the following grammar:
\begin{eqnarray*}\ 
	\varphi &:=& R(\bar u) \ \mid\  
	X(\bar v)  \ \mid\ 
	\neg \varphi \ \mid\ 
	(\varphi \vee \varphi) \ \mid\ 
	\exists x \, \varphi \ \mid\ 
	\exists X \, \varphi
\end{eqnarray*}
where $R \in \R$, $\bar u$ is a tuple of (non-necessarily distinct) variables from $\fv$ whose length is $\arity(R)$, $X \in \sv$, $\bar v$ is a tuple of (non-necessarily distinct) variables from $\fv$ whose length is $\arity(X)$, and $x \in \fv$. 

\marcelo{Tenemos una definicion muy detallada de $\fo$ y $\so$, no es necesario para esta conferencia. Por otro lado seria bueno mencionar las definiciones de $\Sigma_i$ y $\Pi_i$, aunque son estandar es bueno decir que estamos considerando restricciones de $\fo$.}

To define the semantics of $\so$, we need to introduce some terminology. Given a relational signature $\R$ and an ordered finite $\R$-structure $\A$ with domain $A$, a first-order assignment $v$ for $\A$ is a total function from $\fv$ to $A$, while a second-order assignment $V$ for $\A$ is a total function with domain $\sv$ that maps each $X \in \sv$ to a subset of $A^{\arity(X)}$. Moreover, given a first-order assignment $v$ for $\A$, $x \in \fv$ and $a \in A$, we denote by $v[a/x]$ a first-order assignment such that $v[a/x](x) = a$ and $v[a/x](y) = v(y)$ for every $y \in \fv$ distinct from $x$. Similarly, given a second-order assignment $V$ for $\A$, $X \in \sv$ and $B  \subseteq A^{\arity(X)}$, we denote by $V[B/X]$ a second-order assignment such that $V[B/X](X) = B$ and $V[B/X](Y) = V(Y)$ for every $Y \in \sv$ distinct from $X$. 

Assume that $\varphi$ is an $\so$-formula over a signature $\R$. Then given an ordered finite $\R$-structure $\A$ with domain $A$, a first-order assignment $v$ for $\A$ and a second-order assignment $V$ for $\A$, we say that $(\A, v, V)$ satisfies $\varphi$, denoted by $(\A, v, V) \models \varphi$, if: (1) $\varphi$ is the formula $R(x_1, \ldots, x_\ell)$ and $(v(x_1), \ldots, v(x_\ell)) \in R^\A$; (2) $\varphi$ is the formula $X(x_1, \ldots, x_m)$ and $(v(x_1), \ldots, v(x_m)) \in V(X)$; (3) $\varphi$ is the formula $\neg \psi$ and $(\A, v, V)$ does not satisfy $\psi$; (4) $\varphi$ is the formula $(\varphi_1 \vee \varphi_2)$, and $(\A, v, V) \models \varphi_1$ or $(\A, v, V) \models \varphi_2$; (5) $\varphi$ is the formula $\exists x \, \psi$ and there exists $a \in A$ such that $(\A, v[a/x], V) \models \psi$; or (6) $\varphi$ is the formula $\exists X \, \psi$ and there exists $B \subseteq A^{\arity(X)}$ such that $(\A, v, V[B/X]) \models \psi$.  As usual, we consider the propositional operators $\wedge$, $\rightarrow$, and $\leftrightarrow$ that can be obtained from $\vee$ and $\neg$. 
%Moreover, we use the abbreviations $x \not \leq y$ and $x \notin X$ for the negation of the atoms $\leq$ and $\in$. 
%Finally, we consider standard abbreviations of formulas that can be defined in $\so$-logic (actually, $\fo$-logic) like $\first(x) := \fa{x} y \leq x$ and $\last(x) := \fa{x} x \leq y$ to denote the first and last element of the linear order $\leq$, respectively, and $\succesor(x,y) := x \leq y \wedge y \not\leq x \wedge \fa{z} ( z \leq x \vee y \leq z)$ to denote the successor relation.

\cristian{Agregar que la igualdad $=$ esta en nuestra lógica.}

\cristian{Agregar acá que usamos las abreviaciones de $<$ o $\subset$.}

\marcelo{Agregar las definiciones de LFP y PFP}

\cristian{Explicar acá que significa el containment de lógicas booleans, esto es, la notación $\U{1} \subseteq \LL$.}

\subsection{Function complexity classes}


We define the following function complexity classes: $\fp$ is defined as the class of functions computable in polynomial time. $\shp$ is defined as the class of functions that on an input are equal to the number of accepting paths of an $\np$ machine on that input. $\spp$ is defined as the class of functions that on an input are equal to the number of different outputs of an $\np$ transducer on that input. $\fpspace$ is the class of functions computable in polynomial space. $\shpspace$ is defined analogously to $\shp$ but in polynomial space. $\nfpspace$ is the class of single-exponentially bounded functions computable in polynomial space. 

\marcelo{La notacion $\tma_M(x)$ se usa en el paper, hay que definirla aqui. Donde vamos a usar la clase $\gp$? Para definir esta clase tambien necesitamos la notacion $\tmr_M(x)$, podriamos definirla aqui. }

%If $\KK$ is a class of finite structures and $f$ is a function from a relational signature $\R$ to $\bbD$, we denote by $\res{f}{\KK}$ the restriction of $f$ to $\KK$, that is, a function such that: the domain of $\res{f}{\KK}$ is $\{ \enc(\A) \mid \A \in \str[\R] \cap \KK\}$, and 
%$\res{f}{\KK}(\enc(\A)) = f(\enc(\A))$ for every $\A \in \str[\R] \cap \KK$.