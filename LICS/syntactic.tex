%!TEX root = main.tex

The class $\shp$ was introduced in \cite{Valiant79} to prove that computing the permanent of a matrix, as defined in Example \ref{exa-perm}, is a difficult problem. More specifically, it was shown in  \cite{Valiant79}  that this problem is $\shp$-complete. As a consequence of this result the problem of computing the number of perfect matchings in a bipartite graph was also shown to be $\shp$-complete. Since then  many counting problems have been proved to be $\shp$-complete \cite{V79b,PB83,P86,L86,BW91,HMRS98,BW05,DS12, PS13,PS14}. Among them, problems having easy decision counterparts play a fundamental role, as a counting problem with a hard decision version is expected to be hard. A first prominent example of such problems is counting the number of perfect matching in a bipartite graph, as it is well-known that the problem of verifying whether there exists a perfect matching in a bipartite graph can be solved in polynomial time. Other prominent examples of such problems include counting the number of: satisfying assignments of a 2-CNF propositional formula \cite{V79b}, satisfying assignments of a DNF propositional formula \cite{DHK05}, simple paths from a source node to a target node in a directed graph \cite{V79b}, extensions of a partial order to a linear order \cite{BW91} and Eulerian cycles in an undirected graph \cite{BW05}. 

Counting problems with easy decision versions play a fundamental role in the search of efficient approximations algorithms for functions in $\shp$. A fully-polynomial randomized approximation scheme (FPRAS) for a function $f : \Sigma^* \to \bbN$ is a randomized algorithm ${\cal A} : \Sigma^* \times (0,1) \to \bbN$ such that: (1) for every string $x \in \Sigma^*$ and real value $\varepsilon \in (0,1)$, the probability that $|f(x) - {\cal A}(x,\varepsilon)| \leq \varepsilon \cdot f(x)$ is at least $\frac{3}{4}$, and (2) the running time of ${\cal A}$ is polynomial in the size of $x$ and $1/\varepsilon$ \cite{KL83}. Notably, there exist $\shp$-complete functions that can be efficiently approximated as they admit FPRAS; for instance, there exist FPRAS for the problems of counting the number of satisfying assignments of a DNF propositional formula \cite{KL83} and the number of perfect matchings of a bipartite graph \cite{JSV04}. A key observation here is that if a $\shp$-complete function admits an FPRAS, then its associated decision problem is in the complexity class $\bpp$ (Bounded-Error Probabilistic Polynomial-Time). Hence, under standard complexity-theoretical assumptions we cannot hope for an FPRAS for a function in $\shp$ whose decision counterpart is $\np$-complete, and we have to concentrate on the class of counting problems with easy decision versions (in $\bpp$ or in a lower complexity class such as $\ptime$). 

The importance of the class counting problems with easy decision counterparts has motivated the search of robust definitions of classes of functions in $\shp$ with easy decision versions \cite{PagourtzisZ06}. In this section, we use the framework developed in this paper to address this problem. More specifically, we introduce in Section \ref{sec-hier-shp} a hierarchy of 


consider several fragments of $\eqso(\LL)$ where $\LL$ is a boolean logic contained in $\fo$, and we study 

% It should be noted that such class can be directly defined as the set functions f ? #P such that Lf ? P, which is denoted as #Pe in [50, 51]. However, such a definition does not lead to a well-behaved and robust function complexity class. In particular, for every function f ? #P, we have that f + 1 is trivially in #Pe, which is an undesirable property. This has led to the introduction of the more robust class TotP, which is defined as the class of functions f for which there exists a non-deterministic Turing machine M running in polynomial time such that, f(x) is the result of subtracting 1 to the number of (non-necessarily accepting) runs of M with input x [40]. In [51], it is proved that TotP ? #Pe and that TotP has a complete function problem under parsimonious reductions. However, no natural problem is known to be TotP-complete under this type of reductions [51].





In this section we study the fragment of $\eqso(\LL)$ when $\LL$ is a boolean logic contained in $\fo$. We show that by restricting $\LL$ we can find different subclasses below $\shp$ with interesting computational and closure properties. 

\cite{OH93,FH08}

From this point on, for each fragment $\FF$ of $\qso$, we will also use $\FF$ to refer to the class of functions defined by the formulas in $\FF$.

\subsection{A counting hierarchy below $\shp$}
\label{sec-hier-shp}
\input{saluja}

\subsection{Counting hierarchy below $\shp$}


\subsection{Horn Counting Classes}
\input{horn-counting}
